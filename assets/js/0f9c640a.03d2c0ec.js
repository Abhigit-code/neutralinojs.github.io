(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{121:function(e,t,i){"use strict";i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return m}));var n=i(0),a=i.n(n);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)i=l[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var c=a.a.createContext({}),b=function(e){var t=a.a.useContext(c),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},d=function(e){var t=b(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=a.a.forwardRef((function(e,t){var i=e.components,n=e.mdxType,l=e.originalType,r=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=b(i),u=n,m=d["".concat(r,".").concat(u)]||d[u]||p[u]||l;return i?a.a.createElement(m,o(o({ref:t},c),{},{components:i})):a.a.createElement(m,o({ref:t},c))}));function m(e,t){var i=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=i.length,r=new Array(l);r[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,r[1]=o;for(var c=2;c<l;c++)r[c]=i[c];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,i)}u.displayName="MDXCreateElement"},70:function(e,t,i){"use strict";i.r(t),i.d(t,"frontMatter",(function(){return r})),i.d(t,"metadata",(function(){return o})),i.d(t,"toc",(function(){return s})),i.d(t,"default",(function(){return b}));var n=i(3),a=i(8),l=(i(0),i(121)),r={title:"Framework"},o={unversionedId:"release-notes/framework",id:"release-notes/framework",isDocsHomePage:!1,title:"Framework",description:"Unreleased",source:"@site/docs/release-notes/framework.md",slug:"/release-notes/framework",permalink:"/docs/release-notes/framework",editUrl:"https://github.com/neutralinojs/neutralinojs.github.io/edit/main/docs/release-notes/framework.md",version:"current",sidebar:"docs",previous:{title:"About Neutralinojs",permalink:"/docs/contributing/about-neutralinojs"},next:{title:"CLI",permalink:"/docs/release-notes/cli"}},s=[{value:"Unreleased",id:"unreleased",children:[]},{value:"v5.0.0",id:"v500",children:[{value:"API: Reading, writing with standard streams",id:"api-reading-writing-with-standard-streams",children:[]},{value:"API: filesystem",id:"api-filesystem",children:[]},{value:"API: os",id:"api-os",children:[]},{value:"Core: security",id:"core-security",children:[]},{value:"Global variables",id:"global-variables",children:[]},{value:"Deprecations",id:"deprecations",children:[]}]},{value:"v4.15.0",id:"v4150",children:[{value:"Configuration: custom user agent string",id:"configuration-custom-user-agent-string",children:[]},{value:"Configuration: custom configuration files",id:"configuration-custom-configuration-files",children:[]}]},{value:"v4.14.1",id:"v4141",children:[{value:"DevOps",id:"devops",children:[]}]},{value:"v4.14.0",id:"v4140",children:[{value:"Filesystem API",id:"filesystem-api",children:[]},{value:"OS API",id:"os-api",children:[]},{value:"Improvements/bugfixes",id:"improvementsbugfixes",children:[]},{value:"DevOps",id:"devops-1",children:[]}]},{value:"v4.13.0",id:"v4130",children:[{value:"Core: persistent window state",id:"core-persistent-window-state",children:[]},{value:"Improvements/bugfixes",id:"improvementsbugfixes-1",children:[]}]},{value:"v4.12.0",id:"v4120",children:[{value:"API: window",id:"api-window",children:[]},{value:"Core: configuration",id:"core-configuration",children:[]},{value:"Core: webview",id:"core-webview",children:[]},{value:"Improvements/bugfixes",id:"improvementsbugfixes-2",children:[]}]},{value:"v4.11.0",id:"v4110",children:[{value:"API: File watchers",id:"api-file-watchers",children:[]},{value:"Improvements/bugfixes",id:"improvementsbugfixes-3",children:[]}]},{value:"v4.10.0",id:"v4100",children:[{value:"DevOps",id:"devops-2",children:[]},{value:"Improvements/bugfixes",id:"improvementsbugfixes-4",children:[]},{value:"ESM/NPM support",id:"esmnpm-support",children:[]}]},{value:"v4.9.0",id:"v490",children:[{value:"API: Custom methods",id:"api-custom-methods",children:[]},{value:"API: File streams",id:"api-file-streams",children:[]}]},{value:"v4.8.0",id:"v480",children:[{value:"API: os.getEnvs",id:"api-osgetenvs",children:[]},{value:"API: filesystem",id:"api-filesystem-1",children:[]},{value:"API: storage.getKeys",id:"api-storagegetkeys",children:[]},{value:"API: computer.getMousePosition",id:"api-computergetmouseposition",children:[]},{value:"Bugfixes/improvements",id:"bugfixesimprovements",children:[]}]},{value:"v4.7.0",id:"v470",children:[{value:"API: System information API",id:"api-system-information-api",children:[]},{value:"API: os dialogs",id:"api-os-dialogs",children:[]},{value:"DevOps",id:"devops-3",children:[]},{value:"Bugfixes/improvements",id:"bugfixesimprovements-1",children:[]}]},{value:"v4.6.0",id:"v460",children:[{value:"API: Process spawning API",id:"api-process-spawning-api",children:[]},{value:"Core: events",id:"core-events",children:[]},{value:"DevOps",id:"devops-4",children:[]},{value:"API: filesystem",id:"api-filesystem-2",children:[]},{value:"Bugfixes/improvements",id:"bugfixesimprovements-2",children:[]}]},{value:"v4.5.0",id:"v450",children:[{value:"Core: events",id:"core-events-1",children:[]},{value:"DevOps",id:"devops-5",children:[]},{value:"Bugfixes/improvements",id:"bugfixesimprovements-3",children:[]},{value:"Core: global variables",id:"core-global-variables",children:[]}]},{value:"v4.4.0",id:"v440",children:[{value:"API: window",id:"api-window-1",children:[]},{value:"API: filesystem",id:"api-filesystem-3",children:[]},{value:"Dependencies",id:"dependencies",children:[]},{value:"Bugfixes/improvements",id:"bugfixesimprovements-4",children:[]}]},{value:"v4.3.0",id:"v430",children:[{value:"Core: auth",id:"core-auth",children:[]},{value:"API: window",id:"api-window-2",children:[]},{value:"Core: global variables",id:"core-global-variables-1",children:[]},{value:"Bugfixes",id:"bugfixes",children:[]}]},{value:"v4.2.0",id:"v420",children:[{value:"API: clipboard",id:"api-clipboard",children:[]},{value:"Core: configuration",id:"core-configuration-1",children:[]},{value:"API: global variables",id:"api-global-variables",children:[]},{value:"Bugfixes",id:"bugfixes-1",children:[]}]},{value:"v4.1.0",id:"v410",children:[{value:"API: window",id:"api-window-3",children:[]},{value:"API: os",id:"api-os-1",children:[]},{value:"Core: Chrome mode",id:"core-chrome-mode",children:[]},{value:"Core: configuration",id:"core-configuration-2",children:[]}]},{value:"v4.0.0",id:"v400",children:[{value:"API: os.execCommand",id:"api-osexeccommand",children:[]},{value:"Core: API extensions",id:"core-api-extensions",children:[]},{value:"Core: Static server",id:"core-static-server",children:[]},{value:"Core: Community driver processes",id:"core-community-driver-processes",children:[]},{value:"API: app.broadcast",id:"api-appbroadcast",children:[]},{value:"API: events.broadcast",id:"api-eventsbroadcast",children:[]},{value:"API: extensions",id:"api-extensions",children:[]},{value:"API: updater",id:"api-updater",children:[]},{value:"Events",id:"events-1",children:[]},{value:"Error codes",id:"error-codes",children:[]},{value:"Bug fixes",id:"bug-fixes",children:[]},{value:"Global variables",id:"global-variables-1",children:[]}]}],c={toc:s};function b(e){var t=e.components,i=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},c,i,{components:t,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"unreleased"},"Unreleased"),Object(l.b)("h2",{id:"v500"},"v5.0.0"),Object(l.b)("h3",{id:"api-reading-writing-with-standard-streams"},"API: Reading, writing with standard streams"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Implement ",Object(l.b)("inlineCode",{parentName:"li"},"app.readProcessInput(readAll=false)")," for reading string data from the standard input stream. This function can read a single line or multiple lines at once."),Object(l.b)("li",{parentName:"ul"},"Implement ",Object(l.b)("inlineCode",{parentName:"li"},"app.writeProcessOutput")," and ",Object(l.b)("inlineCode",{parentName:"li"},"app.writeProcessError")," for sending string data to standard output and error streams accordingly.")),Object(l.b)("h3",{id:"api-filesystem"},"API: filesystem"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Enable default recursive behavior in the ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.createDirectory")," function."),Object(l.b)("li",{parentName:"ul"},"Add ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.copy"),", ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.move"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.remove")," functions."),Object(l.b)("li",{parentName:"ul"},"Add ",Object(l.b)("inlineCode",{parentName:"li"},"{recursive}")," options object to ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.readDirectory(path, options)")," activate recursive directory listing.")),Object(l.b)("h3",{id:"api-os"},"API: os"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Accept stdin with the background mode of the ",Object(l.b)("inlineCode",{parentName:"li"},"os.execCommand")," function.")),Object(l.b)("h3",{id:"core-security"},"Core: security"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Now, all app clients and extensions require a valid connect token (A part of the ",Object(l.b)("inlineCode",{parentName:"li"},"NL_TOKEN"),") to connect to the Neutralinojs framework WebSocket server to receive app events."),Object(l.b)("li",{parentName:"ul"},"The framework now sends the access token, connect token, port, and extension identifier to extension processes via the standard input, so other processes can't read them by scanning the process list."),Object(l.b)("li",{parentName:"ul"},"The WebSocket client connection origin is checked during the HTTP/WS handshake to make sure that only local clients connect with a specific Neutralinojs app that runs on window, browser, or Chrome mode. Any URL origin is allowed for the cloud mode."),Object(l.b)("li",{parentName:"ul"},"The above security enhancements fix two security advisories on GitHub. ")),Object(l.b)("h3",{id:"global-variables"},"Global variables"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Now the ",Object(l.b)("inlineCode",{parentName:"li"},"NL_ARCH")," global variable returns the same value that ",Object(l.b)("inlineCode",{parentName:"li"},"computer.getArch")," returns.")),Object(l.b)("h3",{id:"deprecations"},"Deprecations"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Removed ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.removeFile"),", ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.removeDirectory"),", ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.copyFile"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.moveFile")," functions."),Object(l.b)("li",{parentName:"ul"},"Extensions won't receive ",Object(l.b)("inlineCode",{parentName:"li"},"--nl-port"),", ",Object(l.b)("inlineCode",{parentName:"li"},"--nl-token"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"--nl-extension-id")," as command-line arguments. Now the framework sends these via stdin as a JSON string. ")),Object(l.b)("h2",{id:"v4150"},"v4.15.0"),Object(l.b)("h3",{id:"configuration-custom-user-agent-string"},"Configuration: custom user agent string"),Object(l.b)("p",null,"Developers sometimes use the user agent string to indentify the client in server-side and client-side source codes. Now, Neutralinojs lets app developers extend the default user agent string with a custom string via the ",Object(l.b)("inlineCode",{parentName:"p"},"window.extendUserAgentWith")," configuration property and the ",Object(l.b)("inlineCode",{parentName:"p"},"--window-extend-user-agent-with=<string>")," command-line option, as shown in the following example:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-js"},'"window": {\n  // ---\n  "extendUserAgentWith": "MyAppClient"\n}\n')),Object(l.b)("p",null,"The above configuration extends the user agent string:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-js"},"console.log(navigator.userAgent)    // <Default UA> MyAppClient \n")),Object(l.b)("h3",{id:"configuration-custom-configuration-files"},"Configuration: custom configuration files"),Object(l.b)("p",null,"The Neutralinojs framework typically loads the application configuration content from the ",Object(l.b)("inlineCode",{parentName:"p"},"neutralino.config.json")," file, but sometimes app developers need to use a custom configuration filename during development (i.e., For separating production and development environments). Now, you can use the ",Object(l.b)("inlineCode",{parentName:"p"},"--config-file=<filename>")," internal command-line parameter to use a custom app configuration, as shown in the following example:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"./myapp-linux_x64 --load-dir-res --config-file=neutralino-dev.config.json\n")),Object(l.b)("h2",{id:"v4141"},"v4.14.1"),Object(l.b)("h3",{id:"devops"},"DevOps"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Use Windows 2019 server and macOS 11 (Big Sur) to compile framework release artifacts."),Object(l.b)("li",{parentName:"ul"},"Set minimum supported macOS version via ",Object(l.b)("inlineCode",{parentName:"li"},"MACOSX_DEPLOYMENT_TARGET=10.7"))),Object(l.b)("h2",{id:"v4140"},"v4.14.0"),Object(l.b)("h3",{id:"filesystem-api"},"Filesystem API"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Introduce the ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.getWatchers")," function to get all created watchers."),Object(l.b)("li",{parentName:"ul"},"Add binary file reading support for the ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.updateOpenedFile(id, action, data)")," function. This function implements ",Object(l.b)("inlineCode",{parentName:"li"},"readBinary")," and ",Object(l.b)("inlineCode",{parentName:"li"},"readAllBinary")," actions and ",Object(l.b)("inlineCode",{parentName:"li"},"dataBinary")," output action in the ",Object(l.b)("inlineCode",{parentName:"li"},"openedFile")," global event."),Object(l.b)("li",{parentName:"ul"},"Return the existing watcher identifier from ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.createWatcher")," if there is an existing active watcher for the given path.")),Object(l.b)("h3",{id:"os-api"},"OS API"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Add a way to set current working directory for process creation functions: ",Object(l.b)("inlineCode",{parentName:"li"},"os.execCommand(command, options)")," now supports ",Object(l.b)("inlineCode",{parentName:"li"},"cwd")," via the options object and ",Object(l.b)("inlineCode",{parentName:"li"},"os.spawnProcess(command, cwd)")," accepts currently working directory via the second string parameter.")),Object(l.b)("h3",{id:"improvementsbugfixes"},"Improvements/bugfixes"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Fix Unicode charactor issues in the tray menu on Windows."),Object(l.b)("li",{parentName:"ul"},"Avoid including null bytes to file reader events initiated by the ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.openFile")," function."),Object(l.b)("li",{parentName:"ul"},"Discard ",Object(l.b)("inlineCode",{parentName:"li"},"window")," method executions on non-window modes.")),Object(l.b)("h3",{id:"devops-1"},"DevOps"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Update external GitHub Action packages to their latest versions."),Object(l.b)("li",{parentName:"ul"},"Fix issues of the failing test cases")),Object(l.b)("h2",{id:"v4130"},"v4.13.0"),Object(l.b)("h3",{id:"core-persistent-window-state"},"Core: persistent window state"),Object(l.b)("p",null,"Now the framework stores the primary window state in a temporary file (JSON formatted) and loads during the startup process.\nThis feature stores and sets the window position (x, y coordinates), size (width and height), and maximized status. This feature is enabled by default in all platforms, but app developers can turn it off by using ",Object(l.b)("inlineCode",{parentName:"p"},"false")," for the ",Object(l.b)("inlineCode",{parentName:"p"},"window.useSavedState")," configuration attribute or ",Object(l.b)("inlineCode",{parentName:"p"},"--window-use-saved-state")," internal CLI argument."),Object(l.b)("p",null,"Also, the window state loading status is available via the ",Object(l.b)("inlineCode",{parentName:"p"},"NL_WSAVSTLOADED")," global variable. The framework sets ",Object(l.b)("inlineCode",{parentName:"p"},"true")," for this boolean variable if the window state was loaded from the saved configuration."),Object(l.b)("h3",{id:"improvementsbugfixes-1"},"Improvements/bugfixes"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Fix several issues in the webview Windows code (i.e., Wait for the window close event, window style fixes, etc.).")),Object(l.b)("h2",{id:"v4120"},"v4.12.0"),Object(l.b)("h3",{id:"api-window"},"API: window"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Add ",Object(l.b)("inlineCode",{parentName:"li"},"window.center")," to center the application window programmatically.")),Object(l.b)("h3",{id:"core-configuration"},"Core: configuration"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Setting the initial window position via ",Object(l.b)("inlineCode",{parentName:"li"},"modes.window.x")," and ",Object(l.b)("inlineCode",{parentName:"li"},"modes.window.y")," integer config props."),Object(l.b)("li",{parentName:"ul"},"Centering the window at startup via ",Object(l.b)("inlineCode",{parentName:"li"},"modes.window.center")," boolean config props."),Object(l.b)("li",{parentName:"ul"},"Add config overrides for the startup window position: ",Object(l.b)("inlineCode",{parentName:"li"},"--window-center=<true|false>"),", ",Object(l.b)("inlineCode",{parentName:"li"},"--window-x=<int>")," and ",Object(l.b)("inlineCode",{parentName:"li"},"--window-y=<int>"))),Object(l.b)("h3",{id:"core-webview"},"Core: webview"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Statically link the Webview2 loader library on Windows, so app developers can package their apps without including the ",Object(l.b)("inlineCode",{parentName:"li"},"WebView2Loader.dll")," file.")),Object(l.b)("h3",{id:"improvementsbugfixes-2"},"Improvements/bugfixes"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Added Unicode characters support for Neutralinojs Windows.")),Object(l.b)("h2",{id:"v4110"},"v4.11.0"),Object(l.b)("h3",{id:"api-file-watchers"},"API: File watchers"),Object(l.b)("p",null,"In some scenarios, Neutralinojs app developers need to implement file watchers in their apps. Earlier, Neutralinojs API didn't offer a native file watcher API and developers had to use less-performant workarounds, such as making recursive ",Object(l.b)("inlineCode",{parentName:"p"},"filesystem.readDirectory")," calls. The new file watchers API lets you create native, cross-platform, event-based file watchers for filesystem paths with the following functions:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"filesystem.createWatcher(path)"),": Creates a new file watcher for a given path and returns the watcher identifier."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"filesystem.removeWatcher(watcherId)"),": Removes a files watcher based on a file watcher identifier.")),Object(l.b)("p",null,"Whenever a filesystem change occurs, file watcher instances dispatch the ",Object(l.b)("inlineCode",{parentName:"p"},"watchFile")," event with the following data:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"id"),": Watcher identifier"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"action"),": Filesystem change: ",Object(l.b)("inlineCode",{parentName:"li"},"add"),", ",Object(l.b)("inlineCode",{parentName:"li"},"delete"),", ",Object(l.b)("inlineCode",{parentName:"li"},"modified"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"moved")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"dir"),": Directory path"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"filename"),": Modified file")),Object(l.b)("h3",{id:"improvementsbugfixes-3"},"Improvements/bugfixes"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Fix the initial window flashing and hidden window state issues on Windows."),Object(l.b)("li",{parentName:"ul"},"Fix data corruption in binary file appending."),Object(l.b)("li",{parentName:"ul"},"Apply dark/light themes based on system preferences on Windows.")),Object(l.b)("h2",{id:"v4100"},"v4.10.0"),Object(l.b)("h3",{id:"devops-2"},"DevOps"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Generate official macOS ",Object(l.b)("inlineCode",{parentName:"li"},"arm64")," (For Apple M1 and higher devices) and universal binaries with the GitHub workflow.")),Object(l.b)("h3",{id:"improvementsbugfixes-4"},"Improvements/bugfixes"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Add a ",Object(l.b)("a",{parentName:"li",href:"https://json-schema.org/"},"JSON schema")," definition for the ",Object(l.b)("inlineCode",{parentName:"li"},"neutralino.config.json")," file."),Object(l.b)("li",{parentName:"ul"},"Fix source code compilation issues on macOS ",Object(l.b)("inlineCode",{parentName:"li"},"arm64")," systems.")),Object(l.b)("h3",{id:"esmnpm-support"},"ESM/NPM support"),Object(l.b)("p",null,"Neutralinojs typically stores the client library implementation in a separate file (",Object(l.b)("inlineCode",{parentName:"p"},"neutralino.js"),"). This approach makes Neutralinojs app development\nprocess easier with a globally exposed JavaScript object, ",Object(l.b)("inlineCode",{parentName:"p"},"Neutralino"),". But, modern web developers use ES modules and they usually like to fetch dependencies from NPM. So, now, developers can load the ",Object(l.b)("inlineCode",{parentName:"p"},"__neutralino_globals.js")," internal script (i.e., ",Object(l.b)("inlineCode",{parentName:"p"},'<script src="__neutralino_globals.js"><\/script>'),") to load only globals. Then, they can use the client library implementation via ",Object(l.b)("inlineCode",{parentName:"p"},"neutralino.mjs")," with the neu CLI or from ",Object(l.b)("a",{parentName:"p",href:"https://www.npmjs.com/package/@neutralinojs/lib"},Object(l.b)("inlineCode",{parentName:"a"},"@neutralinojs/lib"))," with a Node package manager."),Object(l.b)("h2",{id:"v490"},"v4.9.0"),Object(l.b)("h3",{id:"api-custom-methods"},"API: Custom methods"),Object(l.b)("p",null,"Neutralinojs offers the extensions API to write custom backend code with any programming language, but extensions come with the following drawbacks that affect apps in several scenarios:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Extensions use a shared WebSocket for communication, so using direct C++ references (i.e., the window handler) is impossible within extensions."),Object(l.b)("li",{parentName:"ul"},"The developer is responsible for packaging their extension binaries."),Object(l.b)("li",{parentName:"ul"},"A C++-based extension is not fast as native C++-based code due to the WebSockets-based IPC.")),Object(l.b)("p",null,"Alternatively, a developer can download the framework C++ code, modify it, and re-compile it. But, the developer may face issues while synching upstream code modifications. So, Neutralinojs offers a separate namespace, a function template, inbuilt helper functions (i.e., to get the window handler, validation, etc.), and a developer guide to add custom APIs to the Neutralinojs framework without updating the framework core."),Object(l.b)("p",null,"Example:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-js"},"let res = await Neutralino.custom.fetch('https://neutralino.js.org');\n")),Object(l.b)("p",null,"If developers make a custom API that others can use, we motivate them to contribute to the Neutralinojs framework by adding it to the main codebase."),Object(l.b)("p",null,"Example:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-js"},"let res = await Neutralino.net.fetch('https://neutralino.js.org');\n")),Object(l.b)("p",null,"If the developer adds a new custom method to the framework, the client library will automatically export it to the ",Object(l.b)("inlineCode",{parentName:"p"},"Neutralino.custom")," namespace by using the ",Object(l.b)("inlineCode",{parentName:"p"},"NL_CMETHODS")," internal global variable. The ",Object(l.b)("inlineCode",{parentName:"p"},"Neutralino.custom.getMethods")," function returns an array of custom methods similar to ",Object(l.b)("inlineCode",{parentName:"p"},"NL_CMETHODS"),"."),Object(l.b)("h3",{id:"api-file-streams"},"API: File streams"),Object(l.b)("p",null,"The current Neutralinojs API offers non-stream-based (Promise-based but synchronous-like) functions for working with files. For example, the ",Object(l.b)("inlineCode",{parentName:"p"},"filesystem.readFile")," function reads the file content and retrieves data synchronously even though the WebSocket communication mechanism supports asynchronous patterns. However, the synchronous API lets developers work with files in a simple way, but they face the following issues in some scenarios:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Reading large files is not performance-friendly (The whole file content gets loaded into the memory)."),Object(l.b)("li",{parentName:"ul"},"Unable to work with dynamic file objects (i.e., Device files)."),Object(l.b)("li",{parentName:"ul"},"File descriptors are not persistent within the app lifecycle as they get destroyed after native API calls.")),Object(l.b)("p",null,"To solve this issue, we offer an event-based file stream API with the following functions/events:"),Object(l.b)("h4",{id:"functions"},"Functions"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"filesystem.openFile"),": Creates a file stream by openning a file."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"filesystem.updateOpenedFile"),": Triggers a file ",Object(l.b)("inlineCode",{parentName:"li"},"read"),"/",Object(l.b)("inlineCode",{parentName:"li"},"readAll")," event or sets the file cursor."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"filesystem.getOpenedFileInfo"),": Returns (awaited) information about the file stream (Props: ",Object(l.b)("inlineCode",{parentName:"li"},"id"),", ",Object(l.b)("inlineCode",{parentName:"li"},"eof"),", ",Object(l.b)("inlineCode",{parentName:"li"},"pos"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"lastRead"),")")),Object(l.b)("h4",{id:"events"},"Events"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"openedFile"),": Occurs per each file read event and whenever the file stream reaches ",Object(l.b)("inlineCode",{parentName:"li"},"EOF"),".")),Object(l.b)("h2",{id:"v480"},"v4.8.0"),Object(l.b)("h3",{id:"api-osgetenvs"},"API: os.getEnvs"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"os.getEnv")," returns a value for a given environment variable key. Developers had to use alternative methods to retrieve a list of all environment variables with values. The ",Object(l.b)("inlineCode",{parentName:"p"},"os.getEnvs")," returns all environment variables as a JavaScript object similar to Node's ",Object(l.b)("a",{parentName:"p",href:"https://nodejs.dev/en/api/v18/process/#processenv"},Object(l.b)("inlineCode",{parentName:"a"},"process.env")),"."),Object(l.b)("h3",{id:"api-filesystem-1"},"API: filesystem"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Added ",Object(l.b)("inlineCode",{parentName:"li"},"pos")," and ",Object(l.b)("inlineCode",{parentName:"li"},"size")," options for ",Object(l.b)("inlineCode",{parentName:"li"},"readFile")," and ",Object(l.b)("inlineCode",{parentName:"li"},"readBinaryFile")," methods to set the file cursor position and buffer size respectively.")),Object(l.b)("h3",{id:"api-storagegetkeys"},"API: storage.getKeys"),Object(l.b)("p",null,"Added the ",Object(l.b)("inlineCode",{parentName:"p"},"storage.getKeys")," function to get an array of Neutralinojs storage keys. Now, developers don't need to write their own functions to retrieve storage keys with the filesystem API."),Object(l.b)("h3",{id:"api-computergetmouseposition"},"API: computer.getMousePosition"),Object(l.b)("p",null,"Returns the current mouse cursor position via a JavaScript object that has ",Object(l.b)("inlineCode",{parentName:"p"},"x")," and ",Object(l.b)("inlineCode",{parentName:"p"},"y")," props. This function is helpful for develping interactive desktop widgets on all supported platforms."),Object(l.b)("h3",{id:"bugfixesimprovements"},"Bugfixes/improvements"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Replaced string error codes with enums in the C++ source code."),Object(l.b)("li",{parentName:"ul"},"Some refactorings done in C++ struct definitions and return values.")),Object(l.b)("h2",{id:"v470"},"v4.7.0"),Object(l.b)("h3",{id:"api-system-information-api"},"API: System information API"),Object(l.b)("p",null,"Ealier, we had the ",Object(l.b)("inlineCode",{parentName:"p"},"getMemoryInfo")," function in the ",Object(l.b)("inlineCode",{parentName:"p"},"computer")," namespace to retrieve system memory statistics. Now, we have added more functions to get details about the CPU, operating system, kernel, and connected displays:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"computer.getArch"),": Returns the CPU architecture. i.e, ",Object(l.b)("inlineCode",{parentName:"li"},"x64"),", ",Object(l.b)("inlineCode",{parentName:"li"},"arm"),", etc."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"computer.getKernelInfo"),": Returns the operating system's kernel details."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"computer.getOSInfo"),": Returns the operating system details."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"computer.getCPUInfo"),": Returns the CPU details."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"computer.getDisplays"),": Returns an array of all connected displays with the resolution, frequency-like information.")),Object(l.b)("h3",{id:"api-os-dialogs"},"API: os dialogs"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Add the ",Object(l.b)("inlineCode",{parentName:"li"},"defaultPath")," option to ",Object(l.b)("inlineCode",{parentName:"li"},"showSaveDialog"),", ",Object(l.b)("inlineCode",{parentName:"li"},"showOpenDialog"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"showFolderDialog")," functions to set the initial path/filename of system dialogs.")),Object(l.b)("h3",{id:"devops-3"},"DevOps"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Run the test suite on Windows GitHub Actions instance."),Object(l.b)("li",{parentName:"ul"},"Fix the ",Object(l.b)("inlineCode",{parentName:"li"},"armhf")," framework binary generation issue in the GitHub Actions workflow.")),Object(l.b)("h3",{id:"bugfixesimprovements-1"},"Bugfixes/improvements"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Hide the automation info bar from the Chrome mode by default -- Developers can add the ",Object(l.b)("inlineCode",{parentName:"li"},"--enable-automation")," flag to the config file if they need the particular command-line switch.")),Object(l.b)("h2",{id:"v460"},"v4.6.0"),Object(l.b)("h3",{id:"api-process-spawning-api"},"API: Process spawning API"),Object(l.b)("p",null,"We have ",Object(l.b)("inlineCode",{parentName:"p"},"os.execCommand")," for launching processes, but it's synchronous, meaning, the developer has to wait unti process completion to receive ",Object(l.b)("inlineCode",{parentName:"p"},"pid"),", ",Object(l.b)("inlineCode",{parentName:"p"},"stdOut")," and ",Object(l.b)("inlineCode",{parentName:"p"},"stdErr"),". ",Object(l.b)("inlineCode",{parentName:"p"},"execCommand")," is not suitable for long-running processes. The new spawning API offers API functions for handling long-running processes in a multi-threaded way."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"os.spawnProcess(command)"),": Spawns a process and returns ",Object(l.b)("inlineCode",{parentName:"li"},"id")," (A virtual Neutralino-scoped pid) and ",Object(l.b)("inlineCode",{parentName:"li"},"pid")," (Operating system-level pid)."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"os.getSpawnedProcesses()"),": Returns a list of spawned processes."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"os.updateSpawnedProcess(id, action, data)"),": Sends an action event for the spawned process. Supports the following actions:",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"stdIn"),": Sends a string via the standard input stream. ",Object(l.b)("inlineCode",{parentName:"li"},"data")," is the input string."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"stdInEnd"),": Closes the standard input stream."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"exit"),": Terminates the spawned process.")))),Object(l.b)("h3",{id:"core-events"},"Core: events"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"spawnedProcess"),": Dispatched when there is a change in the spawned process. ",Object(l.b)("inlineCode",{parentName:"li"},"CustomEvent")," gets triggered with the following object:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-js"},"{\n  id: <id>,\n  pid: <pid>,\n  action: <action>,\n  data: <data>\n}\n")),Object(l.b)("p",null,"Available actions:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"stdOut"),": Outputs standard output data. ",Object(l.b)("inlineCode",{parentName:"li"},"data")," contains the standard output payload."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"stdErr"),": Outputs standard error data. ",Object(l.b)("inlineCode",{parentName:"li"},"data")," contains the standard error payload."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"exit"),": Notified when the process terminates. ",Object(l.b)("inlineCode",{parentName:"li"},"data")," contains the process exit code.")),Object(l.b)("h3",{id:"devops-4"},"DevOps"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Add official Linux ARM (armhf and arm64) binary build support for the standard release workflow and nightly build.")),Object(l.b)("h3",{id:"api-filesystem-2"},"API: filesystem"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Expose ",Object(l.b)("inlineCode",{parentName:"li"},"createdAt")," and ",Object(l.b)("inlineCode",{parentName:"li"},"modifiedAt")," JavaScript timestamps via the ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.getStats")," function.")),Object(l.b)("h3",{id:"bugfixesimprovements-2"},"Bugfixes/improvements"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Hide the ",Object(l.b)("inlineCode",{parentName:"li"},".storage")," directory (Neutralinojs storage location) on Windows."),Object(l.b)("li",{parentName:"ul"},"Support using query parameters in resources URLs. i.e., ",Object(l.b)("inlineCode",{parentName:"li"},"index.html?v=2.0")," is supported, but caching is not yet implemented."),Object(l.b)("li",{parentName:"ul"},"Show a user-friendly error message for Neutralinojs server initialization failures.")),Object(l.b)("h2",{id:"v450"},"v4.5.0"),Object(l.b)("h3",{id:"core-events-1"},"Core: events"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Added ",Object(l.b)("inlineCode",{parentName:"li"},"windowFocus")," and ",Object(l.b)("inlineCode",{parentName:"li"},"windowBlur")," native events.")),Object(l.b)("h3",{id:"devops-5"},"DevOps"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Use ",Object(l.b)("a",{parentName:"li",href:"https://github.com/codezri/buildzri"},"BuildZri")," for C++ build automation."),Object(l.b)("li",{parentName:"ul"},"Implement a new workflow for nightly releases. Developers can get the nightly release binaries via the ",Object(l.b)("inlineCode",{parentName:"li"},"nightly")," version tag.")),Object(l.b)("h3",{id:"bugfixesimprovements-3"},"Bugfixes/improvements"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Search and dynamically load app indicator libraries on Linux. This enhancement supports Neutralinojs to start without a crash when there is no app indicator library present on the system."),Object(l.b)("li",{parentName:"ul"},"Throw ",Object(l.b)("inlineCode",{parentName:"li"},"NE_OS_TRAYIER")," from the ",Object(l.b)("inlineCode",{parentName:"li"},"os.setTray")," function for initialization failures."),Object(l.b)("li",{parentName:"ul"},"Fix binary file write error on Windows with the ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.writeBinaryFile")," function. This was fixed by using ",Object(l.b)("inlineCode",{parentName:"li"},"LF")," as the line breaker on all platforms as a portable solution. If the developer needs CRLF on Windows (or CR on Darwin), the developer needs to handle it explicitly with ",Object(l.b)("inlineCode",{parentName:"li"},"NL_OS"),".")),Object(l.b)("h3",{id:"core-global-variables"},"Core: global variables"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Add ",Object(l.b)("inlineCode",{parentName:"li"},"NL_COMMIT")," to hold framework's release commit. This is helpful to find the nightly release's code snapshot.")),Object(l.b)("h2",{id:"v440"},"v4.4.0"),Object(l.b)("h3",{id:"api-window-1"},"API: window"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Add ",Object(l.b)("inlineCode",{parentName:"li"},"window.getPosition")," to get the current window coordinates.")),Object(l.b)("h3",{id:"api-filesystem-3"},"API: filesystem"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Add ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.appendFile")," to append text content to a file. Thrown errors are similar to the ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.writeFile")," function."),Object(l.b)("li",{parentName:"ul"},"Add ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.appendBinaryFile")," to append binary content to a file. Thrown errors are similar to the ",Object(l.b)("inlineCode",{parentName:"li"},"filesystem.writeBinaryFile")," function.")),Object(l.b)("h3",{id:"dependencies"},"Dependencies"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Use ",Object(l.b)("inlineCode",{parentName:"li"},"ayatana-appindicator3-0.1")," instead of ",Object(l.b)("inlineCode",{parentName:"li"},"appindicator3-0.1")," (Marked as obsolete in ",Object(l.b)("a",{parentName:"li",href:"https://www.debian.org/releases/bullseye/amd64/release-notes/ch-information.en.html#noteworthy-obsolete-packages"},"Debian packages"),")")),Object(l.b)("h3",{id:"bugfixesimprovements-4"},"Bugfixes/improvements"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Dynamically call ",Object(l.b)("inlineCode",{parentName:"li"},"SetProcessDpiAwarenessContext")," function to support previous Windows versions."),Object(l.b)("li",{parentName:"ul"},"Display the native method name with the ",Object(l.b)("inlineCode",{parentName:"li"},"NE_RT_NATPRME")," error payload.")),Object(l.b)("h2",{id:"v430"},"v4.3.0"),Object(l.b)("h3",{id:"core-auth"},"Core: auth"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Added ",Object(l.b)("inlineCode",{parentName:"li"},"tokenSecurity")," to the configuration to improve the security of ",Object(l.b)("inlineCode",{parentName:"li"},"NL_TOKEN"),". Accepted values are ",Object(l.b)("inlineCode",{parentName:"li"},"none")," and ",Object(l.b)("inlineCode",{parentName:"li"},"one-time"),". If ",Object(l.b)("inlineCode",{parentName:"li"},"none")," is set, Neutralinojs server will always expose ",Object(l.b)("inlineCode",{parentName:"li"},"NL_TOKEN")," for any application instance, so you can open Neutralinojs apps from browser directly. If ",Object(l.b)("inlineCode",{parentName:"li"},"one-time")," (recommended) is set, Neutralinojs server expose ",Object(l.b)("inlineCode",{parentName:"li"},"NL_TOKEN")," only once and client persists the token in ",Object(l.b)("inlineCode",{parentName:"li"},"sessionStorage"),", so all other clients that acces the app after the initial client will get an auth error message (Displayed to the user via HTML).")),Object(l.b)("h3",{id:"api-window-2"},"API: window"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"window.setAlwaysOnTop(bool)")," was added."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"window.getSize")," was added.")),Object(l.b)("h3",{id:"core-global-variables-1"},"Core: global variables"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Added ",Object(l.b)("inlineCode",{parentName:"li"},"NL_EXTENABLED")," which returns ",Object(l.b)("inlineCode",{parentName:"li"},"true")," if extensions are enabled. It is used to check extensions status faster during initialization process.")),Object(l.b)("h3",{id:"bugfixes"},"Bugfixes"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Fixed the file dialog order issue on Windows."),Object(l.b)("li",{parentName:"ul"},"Removed tray icon when the application exits.")),Object(l.b)("h2",{id:"v420"},"v4.2.0"),Object(l.b)("h3",{id:"api-clipboard"},"API: clipboard"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Add clipboard API for all platforms. Supports reading and writing text in the system clipboard.")),Object(l.b)("h3",{id:"core-configuration-1"},"Core: configuration"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Accept chrome-related CLI args: ",Object(l.b)("inlineCode",{parentName:"li"},"--chrome-width"),", ",Object(l.b)("inlineCode",{parentName:"li"},"--chrome-height"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"--chrome-args"),"."),Object(l.b)("li",{parentName:"ul"},"Accept ",Object(l.b)("inlineCode",{parentName:"li"},"--neu-dev-extension")," to enable devtools connections (For internal usages with CLI)."),Object(l.b)("li",{parentName:"ul"},"Accept custom HTTP headers via ",Object(l.b)("inlineCode",{parentName:"li"},"serverHeaders")," option.")),Object(l.b)("h3",{id:"api-global-variables"},"API: global variables"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Added ",Object(l.b)("inlineCode",{parentName:"li"},"NL_RESMODE")," to get details about application resources source. Returns ",Object(l.b)("inlineCode",{parentName:"li"},"bundle")," if resources are loaded from ",Object(l.b)("inlineCode",{parentName:"li"},"resources.neu"),". Otherwise, returns ",Object(l.b)("inlineCode",{parentName:"li"},"directory"),".")),Object(l.b)("h3",{id:"bugfixes-1"},"Bugfixes"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Fix chrome mode user data dir issue (Support paths with spaces)."),Object(l.b)("li",{parentName:"ul"},"Fix browser mode's shutdown issue with neu CLI.")),Object(l.b)("h2",{id:"v410"},"v4.1.0"),Object(l.b)("h3",{id:"api-window-3"},"API: window"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"window.getTitle")," returns the current native window title.")),Object(l.b)("h3",{id:"api-os-1"},"API: os"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Remove ",Object(l.b)("inlineCode",{parentName:"li"},"NE_OS_ENVNOEX")," from ",Object(l.b)("inlineCode",{parentName:"li"},"os.getEnv")," and return an empty string if environment variable is not defined.")),Object(l.b)("h3",{id:"core-chrome-mode"},"Core: Chrome mode"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Now you can run Neutralinojs apps as Chrome apps via the ",Object(l.b)("inlineCode",{parentName:"li"},"chrome")," mode.")),Object(l.b)("h3",{id:"core-configuration-2"},"Core: configuration"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Getting chrome mode config from ",Object(l.b)("inlineCode",{parentName:"li"},"modes.chrome"),". Added ",Object(l.b)("inlineCode",{parentName:"li"},"height"),", ",Object(l.b)("inlineCode",{parentName:"li"},"width"),", and args specially for the chrome mode.")),Object(l.b)("h2",{id:"v400"},"v4.0.0"),Object(l.b)("h3",{id:"api-osexeccommand"},"API: os.execCommand"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Renamed ",Object(l.b)("inlineCode",{parentName:"li"},"shouldRunInBackground")," option to ",Object(l.b)("inlineCode",{parentName:"li"},"background"),"."),Object(l.b)("li",{parentName:"ul"},"Supports ",Object(l.b)("inlineCode",{parentName:"li"},"stdIn")," as an optional input."),Object(l.b)("li",{parentName:"ul"},"Returns multiple values: ",Object(l.b)("inlineCode",{parentName:"li"},"stdOut"),", ",Object(l.b)("inlineCode",{parentName:"li"},"stdErr"),", ",Object(l.b)("inlineCode",{parentName:"li"},"pid"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"exitCode"),".")),Object(l.b)("h3",{id:"core-api-extensions"},"Core: API extensions"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Config file supports new ",Object(l.b)("inlineCode",{parentName:"li"},"extensions")," array globally or in a specific mode."),Object(l.b)("li",{parentName:"ul"},"Neutralino spawns extension processes based on ",Object(l.b)("inlineCode",{parentName:"li"},"extensions")," array."),Object(l.b)("li",{parentName:"ul"},"Neutralino doesn't send kill signals to extension processes. The extension developer needs to stop\nprocesses properly."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"extension")," setting has 4 fields: ",Object(l.b)("inlineCode",{parentName:"li"},"id"),", ",Object(l.b)("inlineCode",{parentName:"li"},"command"),", ",Object(l.b)("inlineCode",{parentName:"li"},"commandLinux"),",",Object(l.b)("inlineCode",{parentName:"li"},"commandDarwin"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"commandWindows"),"."),Object(l.b)("li",{parentName:"ul"},"The ",Object(l.b)("inlineCode",{parentName:"li"},"command"),"'s (platform-specific command's) value accepts ",Object(l.b)("inlineCode",{parentName:"li"},"${NL_PATH}")," global variable."),Object(l.b)("li",{parentName:"ul"},"Each extension process instance is called with three CLI args: ",Object(l.b)("inlineCode",{parentName:"li"},"--nl-port={}"),", ",Object(l.b)("inlineCode",{parentName:"li"},"--nl-extension-id={}")," and ",Object(l.b)("inlineCode",{parentName:"li"},"--nl-token={}")),Object(l.b)("li",{parentName:"ul"},"Enable/disable extensions with ",Object(l.b)("inlineCode",{parentName:"li"},"enableExtensions")," config.")),Object(l.b)("h3",{id:"core-static-server"},"Core: Static server"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Supports setting document root (with ",Object(l.b)("inlineCode",{parentName:"li"},"documentRoot"),") via config. Now, it's possible to launch app without a subdirectory in the URL.")),Object(l.b)("h3",{id:"core-community-driver-processes"},"Core: Community driver processes"),Object(l.b)("p",null,"Now developers can use Neutralinojs as a part of their software with any programming language by spawning Neutralinojs as a child process.\nUse ",Object(l.b)("inlineCode",{parentName:"p"},"exportAuthInfo")," to write auth details to ",Object(l.b)("inlineCode",{parentName:"p"},"${NL_PATH}/.tmp/auth_info.json"),". Then the parent process can pickup access details there. Note that WebSocket communication needs to be initiated via extensions API/loader."),Object(l.b)("h3",{id:"api-appbroadcast"},"API: app.broadcast"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Sends an event to all app clients. This method is for extension developers.")),Object(l.b)("h3",{id:"api-eventsbroadcast"},"API: events.broadcast"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Sends an event to all clients (apps and extensions). Useful for notifying important general events.")),Object(l.b)("h3",{id:"api-extensions"},"API: extensions"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"dispatch"),": Sends an event to a specific extension."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"broadcast"),": Sends an event to all connected extensions. Useful for sending shutdown signals."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"getStats"),": Returns details about loaded extensions and connected extensions.")),Object(l.b)("h3",{id:"api-updater"},"API: updater"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"checkForUpdates"),": Send a request to a seed URL (JSON) and fetch update details."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"install"),": Install updates based on the currently downloaded manifest.")),Object(l.b)("h3",{id:"events-1"},"Events"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"appClientConnect")," and ",Object(l.b)("inlineCode",{parentName:"li"},"appClientDisconnect"),": Occurs when a new app instance is launched and closed respectively."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"extClientConnect")," and ",Object(l.b)("inlineCode",{parentName:"li"},"extClientDisconnect"),": Occurs when a new extension is connected and disconnected respectively."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"extensionReady")," can be used to implement immediate extension calls. This is implemented from the client-side with ",Object(l.b)("inlineCode",{parentName:"li"},"extensions.getStats")," and ",Object(l.b)("inlineCode",{parentName:"li"},"extClientConnect"),". This event gurantees that it will be triggered regardless of the extension's start time.")),Object(l.b)("h3",{id:"error-codes"},"Error codes"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"NE_EX_EXTNOTC"),": Thrown by ",Object(l.b)("inlineCode",{parentName:"li"},"extensions.dispatch")," if the target extension is not connected."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"NE_UP_CUPDMER"),": Thrown by ",Object(l.b)("inlineCode",{parentName:"li"},"updater.checkForUpdates")," if the JSON update manifest is invalid or applicationId is not matching."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"NE_UP_CUPDERR"),": Thrown by ",Object(l.b)("inlineCode",{parentName:"li"},"updater.checkForUpdates")," if the updater API cannot fetch the manifest."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"NE_UP_UPDNOUF"),": Thrown by ",Object(l.b)("inlineCode",{parentName:"li"},"updater.install")," when the update manifest is not loaded."),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"NE_UP_UPDINER"),": Thrown by ",Object(l.b)("inlineCode",{parentName:"li"},"updater.install")," for update installation errors.")),Object(l.b)("h3",{id:"bug-fixes"},"Bug fixes"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Fix port 0 issue with modes. Earlier, if the developer sets port as 0 from a specific mode,\nthe ",Object(l.b)("inlineCode",{parentName:"li"},"NL_PORT")," also becomes 0."),Object(l.b)("li",{parentName:"ul"},"Fix an issue with ",Object(l.b)("inlineCode",{parentName:"li"},"writeToLogFile")," config option. Earlier, the log file was created even this\noption is set to ",Object(l.b)("inlineCode",{parentName:"li"},"false"),".")),Object(l.b)("h3",{id:"global-variables-1"},"Global variables"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"NL_APPVERSION"),": Value of the ",Object(l.b)("inlineCode",{parentName:"li"},"version")," key in the config file.")))}b.isMDXComponent=!0}}]);