(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{120:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return m}));var r=t(0),a=t.n(r);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=a.a.createContext({}),s=function(e){var n=a.a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=s(e.components);return a.a.createElement(p.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},d=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=s(t),d=r,m=u["".concat(o,".").concat(d)]||u[d]||b[d]||i;return t?a.a.createElement(m,l(l({ref:n},p),{},{components:t})):a.a.createElement(m,l({ref:n},p))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=t[p];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},168:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/hmr-preview-cdce2bdfc292933f7c15696bff07cf89.gif"},92:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return l})),t.d(n,"toc",(function(){return c})),t.d(n,"default",(function(){return s}));var r=t(3),a=t(8),i=(t(0),t(120)),o={title:"Using Frontend Libraries"},l={unversionedId:"getting-started/using-frontend-libraries",id:"getting-started/using-frontend-libraries",isDocsHomePage:!1,title:"Using Frontend Libraries",description:"You can build Neutralinojs apps with vanilla JavaScript or with any modern frontend library. If you would like",source:"@site/docs/getting-started/using-frontend-libraries.md",slug:"/getting-started/using-frontend-libraries",permalink:"/docs/getting-started/using-frontend-libraries",editUrl:"https://github.com/neutralinojs/neutralinojs.github.io/edit/main/docs/getting-started/using-frontend-libraries.md",version:"current",sidebar:"docs",previous:{title:"Your First Neutralinojs App",permalink:"/docs/getting-started/your-first-neutralinojs-app"},next:{title:"Native API Overview",permalink:"/docs/api/overview"}},c=[{value:"React",id:"react",children:[]},{value:"Using any frontend library",id:"using-any-frontend-library",children:[{value:"Initializing projects",id:"initializing-projects",children:[]},{value:"Configuring Neutralinojs project",id:"configuring-neutralinojs-project",children:[]},{value:"Configuring neu CLI",id:"configuring-neu-cli",children:[]},{value:"Initializing native API with <code>@neutralinojs/lib</code>",id:"initializing-native-api-with-neutralinojslib",children:[]},{value:"Enabling hot-reload",id:"enabling-hot-reload",children:[]},{value:"Packaging",id:"packaging",children:[]}]}],p={toc:c};function s(e){var n=e.components,o=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},p,o,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"You can build Neutralinojs apps with vanilla JavaScript or with any modern frontend library. If you would like\nto build Neutralinojs apps with a frontend library, first try to use an existing app template via neu CLI:"),Object(i.b)("h2",{id:"react"},"React"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"neu create myapp --template codezri/neutralinojs-react\n")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Repository: ",Object(i.b)("a",{parentName:"li",href:"https://github.com/codezri/neutralinojs-react"},"codezri/neutralinojs-react"))),Object(i.b)("h2",{id:"using-any-frontend-library"},"Using any frontend library"),Object(i.b)("p",null,"The following tutorial guides you to set up any frontend library with Neutralinojs by explaining how we built\nthe Neutralinojs React template:"),Object(i.b)("h3",{id:"initializing-projects"},"Initializing projects"),Object(i.b)("p",null,"First, you need to create a new empty Neutralinojs project. Use the\n",Object(i.b)("a",{parentName:"p",href:"https://github.com/neutralinojs/neutralinojs-zero"},Object(i.b)("inlineCode",{parentName:"a"},"neutralinojs/neutralinojs-zero"))," template to create an\nempty project, as shown below."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"neu create myapp --template neutralinojs/neutralinojs-zero\n")),Object(i.b)("p",null,"Now, create a new project with your favourite frontend framework's command-line tools. In this tutorial,\nwe are going to use React, but you can use any frontend library as you wish.\nYou need to create this project inside the ",Object(i.b)("inlineCode",{parentName:"p"},"myapp")," directory."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"cd myapp\nnpx create-react-app react-src\n")),Object(i.b)("h3",{id:"configuring-neutralinojs-project"},"Configuring Neutralinojs project"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"neutralinojs-zero")," template has a pre-included HTML file and icon, so delete the ",Object(i.b)("inlineCode",{parentName:"p"},"www")," directory since we\ndon't need those files now."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"rm -rf www\n")),Object(i.b)("p",null,"You need to configure the Neutralinojs project to support the frontend framework. First, you can set the\ndocument root with your frontend framework's build directory. React typically generates build outputs to\n",Object(i.b)("inlineCode",{parentName:"p"},"build")," directory, so we can update ",Object(i.b)("inlineCode",{parentName:"p"},"documentRoot")," as follows."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'"documentRoot": "/react-src/build/"\n')),Object(i.b)("p",null,"Now, our Neutralinojs app knows the application resource location, but it's missing an icon, so set an\nicon for the app. You can load an icon from your frontend framework's default resources directory. For\ndemonstration purposes, let's use the React icon from the ",Object(i.b)("inlineCode",{parentName:"p"},"public")," directory."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'  "modes": {\n    "window": {\n      // --- other options\n      "icon": "/react-src/public/logo192.png"\n    }\n  }\n')),Object(i.b)("h3",{id:"configuring-neu-cli"},"Configuring neu CLI"),Object(i.b)("p",null,"By default, the zero template configuration asks the Neutralinojs CLI to download the Neutralinojs client (aka ",Object(i.b)("inlineCode",{parentName:"p"},"neutralino.js"),") from GitHub releases. Then, the CLI creates your app package by copying the ",Object(i.b)("inlineCode",{parentName:"p"},"neutralino.js")," file. However, you can download the client library from the NPM registry and bundle with your app frontend. Remove the ",Object(i.b)("inlineCode",{parentName:"p"},"clientLibrary")," property from the Neutralinojs configuration to avoid fetching the client from GitHub releases:"),Object(i.b)("p",null,"We can configure CLI for React by using the following options."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'  "cli": {\n    // --- other options\n    "resourcesPath": "/react-src/build/",\n    // ---\n    "clientLibrary": "/www/neutralino.js", // <--- Remove this option\n    // ---\n  }\n')),Object(i.b)("p",null,"Now, you can build and run the React application as a Neutralinojs application ","\u2014"," it's possible with the\nfollowing steps."),Object(i.b)("p",null,"First, build the React application with the following command."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"cd react-src\nnpm run build\n")),Object(i.b)("p",null,"Finally, run the Neutralinojs application."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"cd ..\nneu run\n")),Object(i.b)("h3",{id:"initializing-native-api-with-neutralinojslib"},"Initializing native API with ",Object(i.b)("inlineCode",{parentName:"h3"},"@neutralinojs/lib")),Object(i.b)("p",null,"You could run the application with the ",Object(i.b)("inlineCode",{parentName:"p"},"neu run")," command, but you cannot use the native API yet because it has not been initialized. To do that you need to install the Neutralinojs client with following command:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"cd react-src\nnpm install @neutralinojs/lib\n")),Object(i.b)("p",null,"The next step is to load Neutralinojs ",Object(i.b)("a",{parentName:"p",href:"/docs/api/global-variables"},"global variables"),". You can achieve that by including JavaScript script in the root HTML file of a framework of your choice."),Object(i.b)("p",null,"React typically holds the main HTML file content in the ",Object(i.b)("inlineCode",{parentName:"p"},"./public/index.html")," file, so we can put the following\nHTML snippet there to load the client library."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-html"},'<script src="%PUBLIC_URL%/__neutralino_globals.js"><\/script>\n')),Object(i.b)("p",null,"Now make sure to initialize the client library from your frontend application entry point file. React's application entry-point is typically ",Object(i.b)("inlineCode",{parentName:"p"},"./src/index.js"),". Therefore, we can do the initialization process from there by calling the ",Object(i.b)("inlineCode",{parentName:"p"},"init")," function from ",Object(i.b)("inlineCode",{parentName:"p"},"@neutralinojs/lib")," package."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n// Import init function from \"@neutralinojs/lib\"\nimport { init } from \"@neutralinojs/lib\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\ninit(); // Add this function call\n")),Object(i.b)("p",null,"Let's validate if the client library loaded properly. To do that let's use ",Object(i.b)("inlineCode",{parentName:"p"},"filesystem")," API in order to read the current directory of Neutralinojs app."),Object(i.b)("p",null,"Firstly you need to update ",Object(i.b)("inlineCode",{parentName:"p"},"neutralino.config.json")," to allow what API your application can call. You can enable the whole namespace ",Object(i.b)("inlineCode",{parentName:"p"},"filesystem.*")," or just single function from a given namespace like in the snippet below."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'  "nativeAllowList": [\n    "app.*",\n    "filesystem.readDirectory"\n  ],\n')),Object(i.b)("p",null,"Now let's add following snippet in ",Object(i.b)("inlineCode",{parentName:"p"},"./src/App.js")," file which will log the current directory or error message when ",Object(i.b)("inlineCode",{parentName:"p"},"App")," component is mounted."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-jsx"},"import { useEffect } from 'react'\nimport './App.css';\n\n// Import filesystem namespace\nimport { filesystem } from \"@neutralinojs/lib\"\n\nfunction App() {\n\n  // Log current directory or error after component is mounted\n  useEffect(() => {\n    filesystem.readDirectory('./').then((data) => {\n      console.log(data)\n    }).catch((err) => {\n      console.log(err)\n    })\n  }, [])\n\n  return (\n    <div className=\"App\">\n      My Neutralinojs App\n    </div>\n  );\n}\n\nexport default App;\n")),Object(i.b)("p",null,"The last step is to run your Neutralinojs app with ",Object(i.b)("inlineCode",{parentName:"p"},"--window-enable-inspector")," argument which will allow you to open developer tools."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"cd react-src\nnpm run build\n\ncd ..\nneu run -- --window-enable-inspector\n")),Object(i.b)("p",null,"The current directory should be logged to the console. To open developer tools right click anywhere in the Neutralinojs application and press ",Object(i.b)("inlineCode",{parentName:"p"},"inspect element"),"."),Object(i.b)("h3",{id:"enabling-hot-reload"},"Enabling hot-reload"),Object(i.b)("p",null,"Building every code change and testing your application is undoubtedly time-consuming. Therefore, you can use\nyour frontend framework's HMR (Hot Module Replacement) features to speed up your development activities.\nBut, we have a small issue here. There are now two HTTP servers: the Neutralinojs resource server and the\nfrontend framework's development server. How can we load the Neutralinojs client library from the frontend\nframework's development server?"),Object(i.b)("p",null,"Don't worry ","\u2014"," neu CLI provides a built-in feature to enable HMR by patching the main HTML file.\nYou can add the following section to your configuration file for activating hot-reloading."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-json"},'  "cli": {\n    // --- other options\n    "frontendLibrary": {\n        "patchFile": "/react-src/public/index.html",\n        "devUrl": "http://localhost:3000"\n    }\n  }\n}\n')),Object(i.b)("p",null,"The above options tell neu CLI about the main HTML file and development server URL."),Object(i.b)("p",null,"Now, start your frontend development server. In React, we can do it with the following command."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"npm start\n")),Object(i.b)("p",null,"Finally, run the Neutralinojs application with the following command."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"neu run --frontend-lib-dev\n")),Object(i.b)("p",null,Object(i.b)("img",{src:t(168).default})),Object(i.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(i.b)("div",{parentName:"div",className:"admonition-heading"},Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",{parentName:"h5",className:"admonition-icon"},Object(i.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},Object(i.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),Object(i.b)("div",{parentName:"div",className:"admonition-content"},Object(i.b)("p",{parentName:"div"},"Make sure to build your frontend app once before entering the above command since it loads the client\nlibrary globals from the Neutralinojs application resources directory (not from your frontend framework's directory)."))),Object(i.b)("h3",{id:"packaging"},"Packaging"),Object(i.b)("p",null,"To produce the app binaries, first we need to generate static resources via the frontend development tooling. Then, we can generate the Neutralinojs app bundle, as shown in the following command snippet:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-bash"},"cd react-src\nnpm run build\n\ncd ..\nneu build --release\n")),Object(i.b)("p",null,"See the full source code of this tutorial ",Object(i.b)("a",{parentName:"p",href:"https://github.com/codezri/neutralinojs-react"},"here"),"."))}s.isMDXComponent=!0}}]);